<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>List of Notes</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="list-page">

  <!-- Navigation Bar -->
  <header class="top-bar">
    <img src="assets/icon.png" alt="Logo" class="logo" />
    <nav class="nav-menu" id="navMenu">
      <a class="nav-link" href="index.html">HOME</a>
      <a class="nav-link active" href="#">LIST NOTES</a>
      <a class="nav-link" href="bin.html">BIN</a>
    </nav>
  </header>

  <!-- Notes Container -->
  <main class="notes-container">
    <!-- 🔍 Search Bar -->
    <input
      type="text"
      id="searchInput"
      placeholder="Search by title..."
      style="width:100%; padding:10px; font-size:clamp(14px, 2.5vw, 18px); margin-bottom:20px; border-radius:10px;"
    >

    <!-- 📝 Notes List -->
    <div id="notesList"></div>
  </main>

  <!-- Floating Add Button -->
  <button class="floating-add" onclick="location.href='note.html'">＋</button>

  <!-- Script -->
  <script src="script.js"></script>
  <script>
    const container = document.getElementById('notesList');
    const searchInput = document.getElementById('searchInput');
    let notes = getNotes();

    // Sort pinned notes first
    notes.sort((a, b) => (b.pinned === true ? 1 : 0) - (a.pinned === true ? 1 : 0));

    function renderNotes(filteredNotes) {
      container.innerHTML = "";
      if (filteredNotes.length === 0) {
        container.innerHTML = '<p style="color:#ccc; font-size:clamp(14px, 2.5vw, 18px);">No notes found.</p>';
        return;
      }

      filteredNotes.forEach(note => {
        const div = document.createElement("div");
        div.className = "note-item";

        div.innerHTML = `
          <button class="note-title" onclick="location.href='note.html?id=${note.id}'">
            ${note.pinned ? "📌 " : ""}${note.title || "Untitled Note"}
          </button>
          <button class="delete-btn" onclick="deleteNote('${note.id}')">DELETE</button>
        `;
        container.appendChild(div);
      });
    }

    renderNotes(notes);

    searchInput.addEventListener("input", () => {
      const keyword = searchInput.value.toLowerCase();
      const filtered = notes.filter(note =>
        (note.title || "").toLowerCase().includes(keyword)
      );
      renderNotes(filtered);
    });

    function deleteNote(id) {
      const confirmDelete = confirm("Are you sure you want to move this note to Bin?");
      if (!confirmDelete) return;
      moveToBin(id);
      location.reload();
    }

    function toggleNav() {
      const menu = document.getElementById('navMenu');
      menu.classList.toggle('show');
    }
  </script>

</body>
</html>
